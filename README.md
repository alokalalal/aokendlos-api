#Endlos API(Java 1.8)


#Get a code
Clone the repository:
$ git clone https://github.com/Asofta-RVM/endlos-api.git

# To Build an application :

There are multiple property file in the application.

	1. application.properties
	
	   This is common property file and it's not based on the environment.
	   If a property value is not different for each environment then you
	   should define those properties in this file only. 
	   For example, hibernate, quartz etc properties that will remain common.
	   
	2. application-dev.properties - "For development environment"
	3. application-sandbox.properties - "For sandbox environment"
	4. application-production.properties - "For production environment"
	
		Above mentioned three property files are environment specific. 
		Means a property who is having a different value for each environment
		will be defined in this three files with environment specific value.



From command line run the below command to generate a war file of the program.

	$ cd endlos-api
	
	$ mvn clean install
	or 
	$ ant 
	  Before running this command, Please open build.xml file and change the tomcat 
	  location path in "tomcat.dir" variable. This command will generate a war file 
	  and copy paste the same file from target folder of the project to "tomcat.dir" 
	  path. It will also remove existing war file.


Based on your os, Please copy paste below mentioned files into your tomcat's bin folder. 

	$ linux/mac - Create a setenv.sh file - if one is already exist 
	then take a backup of that & copy paste below mentioned line into a new file.
	
	export JAVA_OPTS="-Dspring.profiles.active=dev -Xms1500m -Xmx1500m -XX:+UseG1GC -XX:MaxGCPauseMillis=500 -XX:+DisableExplicitGC -XX:+UseStringDeduplication -XX:+ParallelRefProcEnabled -XX:MaxMetaspaceSize=256m -XX:MaxTenuringThreshold=15" 
	
	$ window - Create a setenv.bat file - if one is already exist 
	then take a backup of that & copy paste below mentioned line into a new file. 
	
	set JAVA_OPTS=-Dspring.profiles.active=dev -Xms1500m -Xmx1500m -XX:+UseG1GC -XX:MaxGCPauseMillis=500 -XX:+DisableExplicitGC -XX:+UseStringDeduplication -XX:+ParallelRefProcEnabled -XX:MaxMetaspaceSize=256m -XX:MaxTenuringThreshold=15 
	
	Possible value of "Dspring.profiles.active" is "dev", "sandbox", "production"
	
	Please set this value according to your environment. if this value is not set then system will take default value as a dev.

Create a log folder that will contains the system log.
 
	1. Create a log folder at /var/log location. Folder name will be "endlos-api"
	There will be four types of log files.
	   #exception - exception generated by system. 
	   #error - errors logged by system due to incorrect data from the user.
	   #info - log the time of each request. 
	   #debug - log the data value of object. default value is off.
	   
Database configuration
 
	1. Database used for this project is postgres.
	
	2. Create a database named as project name. This is preferred but you can create as 
	   per requirement.
	  
	3. Execute data script file in below section. 
	   3.1 {project-folder}/Document/Database/db_location.sql - This contains country,state
	       & city master.
	   3.2 {project-folder}/Document/Database/db_common.sql - Common module 
	   3.3 {project-folder}/Document/Database/db_endlos.sql - project specific module
	   
    4. Create a folder inside your tomcat's conf folder.
       Folder name will be "endlos-api". 
       
    5. Create a db.properties file inside this folder. Location of this fill will be
    	${catalina-base}/conf/{projectname}/db.properties
    	
    6. Put below configuration inside your db.properties file.
    
    	#Database Configuration
    	
       datasource.dataSourceClassName=org.postgresql.ds.PGSimpleDataSource
		datasource.user={user}
		datasource.password={password}
		datasource.databaseName={databasename}
		datasource.portNumber={port}

		#Connection pooling configuration
		datasource.hikaricp.autoCommit=true
		datasource.hikaricp.connectionTimeout=30000
		datasource.hikaricp.idleTimeout=30000
		datasource.hikaricp.maxLifetime=1800000
		datasource.hikaricp.maximumPoolSize=50
		datasource.hikaricp.minimumIdle=10
       # endlos-api
       
Firebase configuration

	1. create a Firebase project
		-  In the Firebase console, click Add project, then follow the on-screen instructions to create a Firebase project.

	2. Navigate to the Cloud Firestore section of the Firebase console
		-  Select a mode for your Cloud Firestore Security Rules
		-  Select a location for your database

	3. Go to Project Setting > Service accounts in the Firebase Console. Generate a new private key and save the JSON file.

	4. Store Json File.Location of this file will be ${catalina-base}/conf/
